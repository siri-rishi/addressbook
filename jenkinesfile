pipeline {
    agent any
      tools{
          jdk 'myjava'
          maven 'mymaven'
      }
    stages {
        stage('COMPILE') {
            steps {
                script {
                echo "COMPILING THE CODE"
                git 'https://github.com/siri-rishi/addressbook.git'
                sh 'mvn compile'
            }
                     }
    }
    stage('UNIT TEST') {
        steps {
            script {
               echo "RUNNING THE UNIT TEST CASES"
               sh 'mvn test'
            }

        }
        post{
            always{
                junit'targetsurefire-reports/*.xml'
            }
        }
        }
     stage('PACKAGE'){
         steps{
             script{
                 echo "PACKAGING THE CODE"
                 sh 'mvn package'    
             }
         }
    }   
    }
}

